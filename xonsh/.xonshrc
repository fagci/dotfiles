# $XONSH_SHOW_TRACEBACK = True
$XONSH_HISTORY_BACKEND = 'sqlite'
$HISTCONTROL='ignoredups'

if 'TERMUX_VERSION' in ${...}:
    aliases['pks'] = 'pkg search'
    aliases['pki'] = 'pkg install'
    aliases['pku'] = 'pkg update'
    aliases['pkug'] = 'pkg upgrade'
    launch = p'$PREFIX/../home/storage/shared/termuxlauncher/.apps-launcher'
    if launch.exists():
        source-bash @(launch)

def _rtn():
    if __xonsh__.history and __xonsh__.history.rtns[-1] > 0:
        return __xonsh__.history.rtns[-1]

$PROMPT_FIELDS['rtn'] = _rtn

if 'SSH_CLIENT' in ${...}:
    $PROMPT='{RED}{rtn:{} }{GREEN}{user}@{hostname} {CYAN}{cwd}{WHITE}{BACKGROUND_BLACK}{curr_branch: {} }{RESET}{YELLOW}ткл{RESET} '
else:
    $PROMPT='{RED}{rtn:{} }{CYAN}{cwd}{WHITE}{BACKGROUND_BLACK}{curr_branch: {} }{RESET}{YELLOW}ткл{RESET} '

aliases['l'] = 'ls'
aliases['ll'] = 'ls -l'
aliases['la'] = 'ls -a'

aliases['ga'] = 'git add'
aliases['gl'] = 'git pull'
aliases['gp'] = 'git push'
aliases['gcam'] = 'git commit -am'

if $(which rsync):
    aliases['cp'] = ['rsync', '--progress', '--recursive', '--archive']
